<ion-header>
  <ion-navbar>
    <ion-buttons end>
      <button ion-button icon-only (click)="onLoadSettings()">
        <ion-icon name="settings"></ion-icon>
      </button>
    </ion-buttons>
    <ion-title>
      Tip Calculator
    </ion-title>
  </ion-navbar>
</ion-header>

<ion-content class="fill-height" padding>
  <ion-grid>
    <ion-row>
      <ion-col col-6>
        <ion-label>Subtotal</ion-label>
      </ion-col>
      <ion-col col-6>
        <ion-input type="string" text-right clearOnEdit
          [(ngModel)]="subtotalString"
          (ngModelChange)="onSubtotalChange($event)"
          placeholder="0.00">
        </ion-input>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col col-3>
        <ion-label>Tax</ion-label>
      </ion-col>
      <ion-col col-5>
        <ion-select interface="popover"
          [(ngModel)]="activeTax"
          (ionChange)="taxChanged()">
          <ion-option
            *ngFor="let tax of taxes"
            [value]="tax">
            {{tax | number:'1.2-2'}}%
          </ion-option>
        </ion-select>
      </ion-col>
      <ion-col col-4>
        <ion-input readonly text-right
          [ngModel]="taxAmount | number:'1.2-2'"
          placeholder="0.00"></ion-input>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col col-6>
        <ion-label>Total</ion-label>
      </ion-col>
      <ion-col col-6>
        <ion-input type="string" text-right clearOnEdit
          [(ngModel)]="totalString"
          (ngModelChange)="onTotalChange($event)"
          placeholder="0.00">
        </ion-input>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col col-6>
        <ion-label>Tip</ion-label>
      </ion-col>
      <!--ion-col col-3>
        <button hideWhen="android" ion-button
          *ngFor="let tip of tips; let i = index"
          (click)="setActiveTip(i)"
          [outline]="i != activeTip">
          {{tip}}
        </button>

        <ion-grid no-padding showWhen="android">
          <ion-row *ngFor="let tip of tips; let i = index">
            <button ion-button
              (click)="setActiveTip(i)"
              [outline]="i != activeTip">
              {{tip}}%
            </button>
          </ion-row>
        </ion-grid>
      </ion-col-->
      <ion-col col-6>
        <ion-input text-right readonly
          [ngModel]="tipAmount | number:'1.2-2'"
          placeholder="0.00"></ion-input>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col *ngFor="let tip of tips; let i = index">
        <button ion-button style="width:100%"
          (click)="setActiveTip(i)"
          [outline]="i != activeTip">
          {{tip}}%
        </button>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col col-6>
        <ion-label>Amount due</ion-label>
      </ion-col>
      <ion-col col-6>
        <ion-input readonly text-right
          [ngModel]="amountDue | number:'1.2-2'"
          placeholder="0.00"></ion-input>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col col-6>
        <ion-label>Persons: {{persons}} </ion-label>
      </ion-col>
      <ion-col col-6>
        <ion-label text-right>{{perPersonAmount | number:'1.2-2'}}</ion-label>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-range style="width:100%" [(ngModel)]="persons" (ngModelChange)="onPersonsChange()"
        min=1 max=12 snaps>
      </ion-range>
    </ion-row>
  </ion-grid>

</ion-content>
